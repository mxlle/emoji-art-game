Copied from game-tools-js and adapted for typescript
